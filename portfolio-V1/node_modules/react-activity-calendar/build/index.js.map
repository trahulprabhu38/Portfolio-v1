{"version":3,"file":"index.js","sources":["../src/constants.ts","../src/hooks/useColorScheme.ts","../src/hooks/usePrefersReducedMotion.ts","../node_modules/.pnpm/style-inject@0.3.0/node_modules/style-inject/dist/style-inject.es.js","../src/utils/calendar.ts","../src/utils/label.ts","../src/utils/theme.ts","../src/component/ActivityCalendar.tsx","../src/index.tsx"],"sourcesContent":["export const NAMESPACE = 'react-activity-calendar';\nexport const LABEL_MARGIN = 8; // px\n\nexport const DEFAULT_MONTH_LABELS = [\n  'Jan',\n  'Feb',\n  'Mar',\n  'Apr',\n  'May',\n  'Jun',\n  'Jul',\n  'Aug',\n  'Sep',\n  'Oct',\n  'Nov',\n  'Dec',\n];\n\nexport const DEFAULT_LABELS = {\n  months: DEFAULT_MONTH_LABELS,\n  weekdays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  totalCount: '{{count}} activities in {{year}}',\n  legend: {\n    less: 'Less',\n    more: 'More',\n  },\n};\n","import { useEffect, useState } from 'react';\n\nexport function useColorScheme() {\n  const [colorScheme, setColorScheme] = useState<'light' | 'dark'>('light');\n\n  const onChange = (event: MediaQueryListEvent) => {\n    setColorScheme(event.matches ? 'dark' : 'light');\n  };\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    setColorScheme(mediaQuery.matches ? 'dark' : 'light');\n\n    mediaQuery.addEventListener('change', onChange);\n\n    return () => {\n      mediaQuery.removeEventListener('change', onChange);\n    };\n  }, []);\n\n  return colorScheme;\n}\n","import { useEffect, useState } from 'react';\n\nconst query = '(prefers-reduced-motion: reduce)';\n\nexport function usePrefersReducedMotion() {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(true);\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(query);\n    setPrefersReducedMotion(mediaQuery.matches);\n\n    const onChange = (event: MediaQueryListEvent) => {\n      setPrefersReducedMotion(event.matches);\n    };\n\n    mediaQuery.addEventListener('change', onChange);\n\n    return () => {\n      mediaQuery.removeEventListener('change', onChange);\n    };\n  }, []);\n\n  return prefersReducedMotion;\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import {\n  differenceInCalendarDays,\n  eachDayOfInterval,\n  endOfYear,\n  formatISO,\n  getDay,\n  isValid,\n  nextDay,\n  parseISO,\n  startOfYear,\n  subWeeks,\n} from 'date-fns';\n\nimport { NAMESPACE } from '../constants';\nimport type { Activity, DayIndex, Week } from '../types';\n\nexport function validateActivities(activities: Array<Activity>, maxLevel: number) {\n  if (activities.length === 0) {\n    throw new Error('Activity data must not be empty.');\n  }\n\n  for (const { date, level, count } of activities) {\n    if (!isValid(parseISO(date))) {\n      throw new Error(`Activity date '${date}' is not a valid ISO 8601 date string.`);\n    }\n\n    if (count < 0) {\n      throw new RangeError(`Activity count must not be negative, found ${count}.`);\n    }\n\n    if (level < 0 || level > maxLevel) {\n      throw new RangeError(\n        `Activity level ${level} for ${date} is out of range. It must be between 0 and ${maxLevel}.`,\n      );\n    }\n  }\n}\n\nexport function groupByWeeks(\n  activities: Array<Activity>,\n  weekStart: DayIndex = 0, // 0 = Sunday\n): Array<Week> {\n  const normalizedActivities = fillHoles(activities);\n\n  // Determine the first date of the calendar. If the first date is not the\n  // passed weekday, the respective weekday one week earlier is used.\n  const firstActivity = normalizedActivities[0] as Activity;\n  const firstDate = parseISO(firstActivity.date);\n  const firstCalendarDate =\n    getDay(firstDate) === weekStart ? firstDate : subWeeks(nextDay(firstDate, weekStart), 1);\n\n  // To correctly group activities by week, it is necessary to left-pad the list\n  // because the first date might not be set start weekday.\n  const paddedActivities = [\n    ...(Array(differenceInCalendarDays(firstDate, firstCalendarDate)).fill(\n      undefined,\n    ) as Array<Activity>),\n    ...normalizedActivities,\n  ];\n\n  const numberOfWeeks = Math.ceil(paddedActivities.length / 7);\n\n  // Finally, group activities by week\n  return range(numberOfWeeks).map(weekIndex =>\n    paddedActivities.slice(weekIndex * 7, weekIndex * 7 + 7),\n  );\n}\n\n/**\n * The calendar expects a continuous sequence of days,\n * so fill gaps with empty activity data.\n */\nfunction fillHoles(activities: Array<Activity>): Array<Activity> {\n  const calendar = new Map<string, Activity>(activities.map(a => [a.date, a]));\n  const firstActivity = activities[0] as Activity;\n  const lastActivity = activities[activities.length - 1] as Activity;\n\n  return eachDayOfInterval({\n    start: parseISO(firstActivity.date),\n    end: parseISO(lastActivity.date),\n  }).map(day => {\n    const date = formatISO(day, { representation: 'date' });\n\n    if (calendar.has(date)) {\n      return calendar.get(date) as Activity;\n    }\n\n    return {\n      date,\n      count: 0,\n      level: 0,\n    };\n  });\n}\n\nexport function getClassName(name: string, styles?: string): string {\n  if (styles) {\n    return `${NAMESPACE}__${name} ${styles}`;\n  }\n\n  return `${NAMESPACE}__${name}`;\n}\n\nexport function generateEmptyData(): Array<Activity> {\n  const year = new Date().getFullYear();\n  const days = eachDayOfInterval({\n    start: new Date(year, 0, 1),\n    end: new Date(year, 11, 31),\n  });\n\n  return days.map(date => ({\n    date: formatISO(date, { representation: 'date' }),\n    count: 0,\n    level: 0,\n  }));\n}\n\nexport function generateTestData(args: {\n  interval?: { start: Date; end: Date };\n  maxLevel?: number;\n}): Array<Activity> {\n  const maxCount = 20;\n  const maxLevel = args.maxLevel ? Math.max(1, args.maxLevel) : 4;\n  const now = new Date();\n\n  const days = eachDayOfInterval(\n    args.interval ?? {\n      start: startOfYear(now),\n      end: endOfYear(now),\n    },\n  );\n\n  return days.map(date => {\n    // The random activity count is shifted by up to 80% towards zero.\n    const c = Math.round(Math.random() * maxCount - Math.random() * (0.8 * maxCount));\n    const count = Math.max(0, c);\n    const level = Math.ceil((count / maxCount) * maxLevel);\n\n    return {\n      date: formatISO(date, { representation: 'date' }),\n      count,\n      level,\n    };\n  });\n}\n\nexport function range(n: number) {\n  return [...Array(n).keys()];\n}\n","import { getMonth, parseISO } from 'date-fns';\n\nimport type { Props } from '../component/ActivityCalendar';\nimport { DEFAULT_MONTH_LABELS } from '../constants';\nimport type { DayIndex, DayName, Week, WeekdayLabels } from '../types';\n\ninterface MonthLabel {\n  weekIndex: number;\n  label: string;\n}\n\nexport function getMonthLabels(\n  weeks: Array<Week>,\n  monthNames: Array<string> = DEFAULT_MONTH_LABELS,\n): Array<MonthLabel> {\n  return weeks\n    .reduce<Array<MonthLabel>>((labels, week, weekIndex) => {\n      const firstActivity = week.find(activity => activity !== undefined);\n\n      if (!firstActivity) {\n        throw new Error(`Unexpected error: Week ${weekIndex + 1} is empty: [${week}].`);\n      }\n\n      const month = monthNames[getMonth(parseISO(firstActivity.date))];\n\n      if (!month) {\n        const monthName = new Date(firstActivity.date).toLocaleString('en-US', { month: 'short' });\n        throw new Error(`Unexpected error: undefined month label for ${monthName}.`);\n      }\n\n      const prevLabel = labels[labels.length - 1];\n\n      if (weekIndex === 0 || !prevLabel || prevLabel.label !== month) {\n        return [...labels, { weekIndex, label: month }];\n      }\n\n      return labels;\n    }, [])\n    .filter(({ weekIndex }, index, labels) => {\n      // Labels should only be shown if there is \"enough\" space (data).\n      // This is a naive implementation that does not take the block size,\n      // font size, etc. into account.\n      const minWeeks = 3;\n\n      // Skip the first month label if there is not enough space to the next one.\n      if (index === 0) {\n        return labels[1] && labels[1].weekIndex - weekIndex >= minWeeks;\n      }\n\n      // Skip the last month label if there is not enough data in that month\n      // to avoid overflowing the calendar on the right.\n      if (index === labels.length - 1) {\n        return weeks.slice(weekIndex).length >= minWeeks;\n      }\n\n      return true;\n    });\n}\n\nexport function maxWeekdayLabelWidth(\n  labels: string[],\n  showWeekdayLabel: WeekdayLabels,\n  fontSize: number,\n): number {\n  if (labels.length !== 7) {\n    throw new Error('Exactly 7 labels, one for each weekday must be passed.');\n  }\n\n  return labels.reduce(\n    (maxWidth, label, index) =>\n      showWeekdayLabel.byDayIndex(index as DayIndex)\n        ? Math.max(maxWidth, Math.ceil(calcTextDimensions(label, fontSize).width))\n        : maxWidth,\n    0,\n  );\n}\n\nexport function calcTextDimensions(text: string, fontSize: number) {\n  if (fontSize < 1) {\n    throw new RangeError('fontSize must be positive');\n  }\n\n  if (text.length === 0) {\n    return { width: 0, height: 0 };\n  }\n\n  const namespace = 'http://www.w3.org/2000/svg';\n  const svg = document.createElementNS(namespace, 'svg');\n\n  svg.style.position = 'absolute';\n  svg.style.visibility = 'hidden';\n  svg.style.fontFamily = window.getComputedStyle(document.body).fontFamily;\n  svg.style.fontSize = `${fontSize}px`;\n\n  const textNode = document.createElementNS(namespace, 'text');\n  textNode.textContent = text;\n\n  svg.appendChild(textNode);\n  document.body.appendChild(svg);\n  const boundingBox = textNode.getBBox();\n\n  document.body.removeChild(svg);\n\n  return { width: boundingBox.width, height: boundingBox.height };\n}\n\nexport function initWeekdayLabels(\n  input: Props['showWeekdayLabels'],\n  weekStart: DayIndex,\n): WeekdayLabels {\n  if (!input)\n    return {\n      byDayIndex: () => false,\n      shouldShow: false,\n    };\n\n  // Default: Show every second day of the week.\n  if (input === true) {\n    return {\n      byDayIndex: index => {\n        return ((7 + index - weekStart) % 7) % 2 !== 0;\n      },\n      shouldShow: true,\n    };\n  }\n\n  const indexed: Array<boolean> = [];\n  for (const name of input) {\n    const index = dayNameToIndex[name.toLowerCase() as DayName];\n    indexed[index] = true;\n  }\n\n  return {\n    byDayIndex: index => indexed[index] ?? false,\n    shouldShow: input.length > 0,\n  };\n}\n\nconst dayNameToIndex: {\n  [name in DayName]: DayIndex;\n} = {\n  sun: 0,\n  mon: 1,\n  tue: 2,\n  wed: 3,\n  thu: 4,\n  fri: 5,\n  sat: 6,\n};\n","import chroma from 'chroma-js';\n\nimport type { Color, ColorScale, Theme, ThemeInput } from '../types';\n\nexport function createTheme(input?: ThemeInput, size: number = 5): Theme {\n  const defaultTheme = createDefaultTheme(size);\n\n  if (input) {\n    validateTheme(input, size);\n\n    input.light = input.light ?? defaultTheme.light;\n    input.dark = input.dark ?? defaultTheme.dark;\n\n    return {\n      light: isColorScale(input.light, size) ? input.light : createColorScale(input.light, size),\n      dark: isColorScale(input.dark, size) ? input.dark : createColorScale(input.dark, size),\n    };\n  }\n\n  return defaultTheme;\n}\n\nfunction createDefaultTheme(size: number): Theme {\n  return {\n    light: createColorScale(['hsl(0, 0%, 92%)', 'hsl(0, 0%, 26%)'], size),\n    dark: createColorScale(['hsl(0, 0%, 20%)', 'hsl(0, 0%, 92%)'], size),\n  };\n}\n\nfunction validateTheme(input: ThemeInput, size: number) {\n  if (typeof input !== 'object' || (input.light === undefined && input.dark === undefined)) {\n    throw new Error(\n      `The theme object must contain at least one of the fields \"light\" and \"dark\" with exactly 2 or ${size} colors respectively.`,\n    );\n  }\n\n  if (input.light) {\n    const { length } = input.light;\n    if (length !== 2 && length !== size) {\n      throw new Error(`theme.light must contain exactly 2 or ${size} colors, ${length} passed.`);\n    }\n  }\n\n  if (input.dark) {\n    const { length } = input.dark;\n    if (length !== 2 && length !== size) {\n      throw new Error(`theme.dark must contain exactly 2 or ${size} colors, ${length} passed.`);\n    }\n  }\n}\n\nfunction isColorScale(colors: Array<unknown>, size: number): colors is ColorScale {\n  const invalidColor = colors.find(color => !chroma.valid(color));\n\n  if (invalidColor) {\n    throw new Error(\n      `Invalid color \"${String(invalidColor)}\" passed. All CSS color formats are accepted.`,\n    );\n  }\n\n  return colors.length === size;\n}\n\nfunction createColorScale(colors: [from: Color, to: Color], size: number): ColorScale {\n  return chroma.scale(colors).mode('lch').colors(size);\n}\n","'use client';\n\nimport chroma from 'chroma-js';\nimport { getYear, parseISO } from 'date-fns';\nimport {\n  type CSSProperties,\n  type ForwardedRef,\n  Fragment,\n  type ReactElement,\n  forwardRef,\n} from 'react';\n\nimport { DEFAULT_LABELS, LABEL_MARGIN, NAMESPACE } from '../constants';\nimport { useColorScheme } from '../hooks/useColorScheme';\nimport { usePrefersReducedMotion } from '../hooks/usePrefersReducedMotion';\nimport styles from '../styles/styles.module.css';\nimport type {\n  Activity,\n  BlockElement,\n  Color,\n  DayIndex,\n  DayName,\n  EventHandlerMap,\n  Labels,\n  ReactEvent,\n  SVGRectEventHandler,\n  ThemeInput,\n} from '../types';\nimport {\n  generateEmptyData,\n  getClassName,\n  groupByWeeks,\n  range,\n  validateActivities,\n} from '../utils/calendar';\nimport { getMonthLabels, initWeekdayLabels, maxWeekdayLabelWidth } from '../utils/label';\nimport { createTheme } from '../utils/theme';\n\nexport interface Props {\n  /**\n   * List of calendar entries. Every `Activity` object requires an ISO 8601\n   * `date` string in the format `yyyy-MM-dd`, a `count` property with the\n   * amount of tracked data and a `level` property in the range `0-maxLevel`\n   * to specify activity intensity. The `maxLevel` prop is 4 by default.\n   *\n   * For missing dates, no activity is assumed. This allows choosing the start\n   * and end date of the calendar arbitrarily by passing empty entries as the\n   * first and last item.\n   *\n   * Example object:\n   *\n   * ```json\n   * {\n   *   date: \"2021-02-20\",\n   *   count: 16,\n   *   level: 3\n   * }\n   * ```\n   */\n  data: Array<Activity>;\n  /**\n   * Margin between blocks in pixels.\n   */\n  blockMargin?: number;\n  /**\n   * Border radius of blocks in pixels.\n   */\n  blockRadius?: number;\n  /**\n   * Block size in pixels.\n   */\n  blockSize?: number;\n  /**\n   * Use a specific color scheme instead of the system one. Supported values\n   * are `'light'` and `'dark'`.\n   */\n  colorScheme?: 'light' | 'dark';\n  /**\n   * Event handlers to register for the SVG `<rect>` elements that are used to\n   * render the calendar days. Handler signature: `event => activity => void`\n   */\n  eventHandlers?: EventHandlerMap;\n  /**\n   * Font size for text in pixels.\n   */\n  fontSize?: number;\n  /**\n   * Toggle to hide color legend below calendar.\n   */\n  hideColorLegend?: boolean;\n  /**\n   * Toggle to hide month labels above calendar.\n   */\n  hideMonthLabels?: boolean;\n  /**\n   * Toggle to hide the total count below calendar.\n   */\n  hideTotalCount?: boolean;\n  /**\n   * Localization strings for all calendar labels.\n   *\n   * `totalCount` supports the placeholders `{{count}}` and `{{year}}`.\n   */\n  labels?: Labels;\n  /**\n   * Maximum activity level (zero indexed).\n   */\n  maxLevel?: number;\n  /**\n   * Toggle for loading state. `data` property will be ignored if set.\n   */\n  loading?: boolean;\n  /**\n   * Ref to access the calendar DOM node.\n   */\n  ref?: ForwardedRef<HTMLElement>;\n  /**\n   * Render prop for calendar blocks (activities). For example, useful to wrap\n   * the element with a tooltip component. Use `React.cloneElement` to pass\n   * additional props to the element if necessary.\n   */\n  renderBlock?: (block: BlockElement, activity: Activity) => ReactElement;\n  /**\n   * Render prop for color legend blocks. For example, useful to wrap the\n   * element with a tooltip component. Use `React.cloneElement` to pass\n   * additional props to the element if necessary.\n   */\n  renderColorLegend?: (block: BlockElement, level: number) => ReactElement;\n  /**\n   * Toggle to show weekday labels left to the calendar.\n   * Alternatively, pass a list of ISO 8601 weekday names to show.\n   * For example `['mon', 'wed', 'fri']`.\n   */\n  showWeekdayLabels?: boolean | Array<DayName>;\n  /**\n   * Style object to pass to component container.\n   */\n  style?: CSSProperties;\n  /**\n   * Set the calendar colors for the light and dark system color scheme.\n   * Define each color scale explicitly by settings all colors (5 per default)\n   * or pass exactly two colors (the lowest and highest intensity) to calculate\n   * a single-hue scale. Colors can be specified in any valid CSS format.\n   *\n   * The colors for at least one scheme must be set. If undefined, the default\n   * theme is used. By default, the calendar will select the current system color\n   * scheme, but you can enforce a specific scheme with the `colorScheme` prop.\n   *\n   * Example:\n   *\n   * ```tsx\n   * <ActivityCalendar\n   *   data={data}\n   *   theme={{\n   *     light: ['hsl(0, 0%, 92%)', 'firebrick'],\n   *     dark: ['#333', 'rgb(214, 16, 174)'],\n   *   }}\n   * />\n   * ```\n   *\n   */\n  theme?: ThemeInput;\n  /**\n   * Overwrite the total activity count.\n   */\n  totalCount?: number;\n  /**\n   * Index of day to be used as start of week. 0 represents Sunday.\n   */\n  weekStart?: DayIndex;\n}\n\nconst ActivityCalendar = forwardRef<HTMLElement, Props>(\n  (\n    {\n      data: activities,\n      blockMargin = 4,\n      blockRadius = 2,\n      blockSize = 12,\n      colorScheme = undefined,\n      eventHandlers = {},\n      fontSize = 14,\n      hideColorLegend = false,\n      hideMonthLabels = false,\n      hideTotalCount = false,\n      labels: labelsProp = undefined,\n      maxLevel = 4,\n      loading = false,\n      renderBlock = undefined,\n      renderColorLegend = undefined,\n      showWeekdayLabels = false,\n      style: styleProp = {},\n      theme: themeProp = undefined,\n      totalCount: totalCountProp = undefined,\n      weekStart = 0, // Sunday\n    }: Props, // Required for react-docgen\n    ref,\n  ) => {\n    maxLevel = Math.max(1, maxLevel);\n\n    const theme = createTheme(themeProp, maxLevel + 1);\n    const systemColorScheme = useColorScheme();\n    const colorScale = theme[colorScheme ?? systemColorScheme];\n\n    const useAnimation = !usePrefersReducedMotion();\n\n    if (loading) {\n      activities = generateEmptyData();\n    }\n\n    validateActivities(activities, maxLevel);\n\n    const firstActivity = activities[0] as Activity;\n    const year = getYear(parseISO(firstActivity.date));\n    const weeks = groupByWeeks(activities, weekStart);\n\n    const labels = Object.assign({}, DEFAULT_LABELS, labelsProp);\n    const labelHeight = hideMonthLabels ? 0 : fontSize + LABEL_MARGIN;\n\n    const weekdayLabels = initWeekdayLabels(showWeekdayLabels, weekStart);\n    const weekdayLabelOffset = weekdayLabels.shouldShow\n      ? maxWeekdayLabelWidth(labels.weekdays, weekdayLabels, fontSize) + LABEL_MARGIN\n      : undefined;\n\n    function getDimensions() {\n      return {\n        width: weeks.length * (blockSize + blockMargin) - blockMargin,\n        height: labelHeight + (blockSize + blockMargin) * 7 - blockMargin,\n      };\n    }\n\n    function getEventHandlers(activity: Activity): SVGRectEventHandler {\n      return (\n        Object.keys(eventHandlers) as Array<keyof SVGRectEventHandler>\n      ).reduce<SVGRectEventHandler>(\n        (handlers, key) => ({\n          ...handlers,\n          [key]: (event: ReactEvent<SVGRectElement>) => eventHandlers[key]?.(event)(activity),\n        }),\n        {},\n      );\n    }\n\n    function renderCalendar() {\n      return weeks\n        .map((week, weekIndex) =>\n          week.map((activity, dayIndex) => {\n            if (!activity) {\n              return null;\n            }\n\n            const style =\n              loading && useAnimation\n                ? {\n                    animation: `${styles.loadingAnimation} 1.75s ease-in-out infinite`,\n                    animationDelay: `${weekIndex * 20 + dayIndex * 20}ms`,\n                  }\n                : undefined;\n\n            const block = (\n              <rect\n                {...getEventHandlers(activity)}\n                x={0}\n                y={labelHeight + (blockSize + blockMargin) * dayIndex}\n                width={blockSize}\n                height={blockSize}\n                rx={blockRadius}\n                ry={blockRadius}\n                fill={colorScale[activity.level]}\n                data-date={activity.date}\n                data-level={activity.level}\n                style={style}\n              />\n            );\n\n            return (\n              <Fragment key={activity.date}>\n                {renderBlock ? renderBlock(block, activity) : block}\n              </Fragment>\n            );\n          }),\n        )\n        .map((week, x) => (\n          <g key={x} transform={`translate(${(blockSize + blockMargin) * x}, 0)`}>\n            {week}\n          </g>\n        ));\n    }\n\n    function renderFooter() {\n      if (hideTotalCount && hideColorLegend) {\n        return null;\n      }\n\n      const totalCount =\n        typeof totalCountProp === 'number'\n          ? totalCountProp\n          : activities.reduce((sum, activity) => sum + activity.count, 0);\n\n      return (\n        <footer\n          className={getClassName('footer', styles.footer)}\n          style={{ marginLeft: weekdayLabelOffset }}\n        >\n          {/* Placeholder */}\n          {loading && <div>&nbsp;</div>}\n\n          {!loading && !hideTotalCount && (\n            <div className={getClassName('count')}>\n              {labels.totalCount\n                ? labels.totalCount\n                    .replace('{{count}}', String(totalCount))\n                    .replace('{{year}}', String(year))\n                : `${totalCount} activities in ${year}`}\n            </div>\n          )}\n\n          {!loading && !hideColorLegend && (\n            <div className={getClassName('legend-colors', styles.legendColors)}>\n              <span style={{ marginRight: '0.4em' }}>{labels.legend.less}</span>\n              {range(maxLevel + 1).map(level => {\n                const block = (\n                  <svg width={blockSize} height={blockSize} key={level}>\n                    <rect\n                      width={blockSize}\n                      height={blockSize}\n                      fill={colorScale[level]}\n                      rx={blockRadius}\n                      ry={blockRadius}\n                    />\n                  </svg>\n                );\n\n                return renderColorLegend ? renderColorLegend(block, level) : block;\n              })}\n              <span style={{ marginLeft: '0.4em' }}>{labels.legend.more}</span>\n            </div>\n          )}\n        </footer>\n      );\n    }\n\n    function renderWeekdayLabels() {\n      if (!weekdayLabels.shouldShow) {\n        return null;\n      }\n\n      return (\n        <g className={getClassName('legend-weekday')}>\n          {range(7).map(index => {\n            const dayIndex = ((index + weekStart) % 7) as DayIndex;\n\n            if (!weekdayLabels.byDayIndex(dayIndex)) {\n              return null;\n            }\n\n            return (\n              <text\n                x={-LABEL_MARGIN}\n                y={labelHeight + (blockSize + blockMargin) * index + blockSize / 2}\n                dominantBaseline=\"central\"\n                textAnchor=\"end\"\n                key={index}\n              >\n                {labels.weekdays[dayIndex]}\n              </text>\n            );\n          })}\n        </g>\n      );\n    }\n\n    function renderMonthLabels() {\n      if (hideMonthLabels) {\n        return null;\n      }\n\n      return (\n        <g className={getClassName('legend-month')}>\n          {getMonthLabels(weeks, labels.months).map(({ label, weekIndex }) => (\n            <text\n              x={(blockSize + blockMargin) * weekIndex}\n              dominantBaseline=\"hanging\"\n              key={weekIndex}\n            >\n              {label}\n            </text>\n          ))}\n        </g>\n      );\n    }\n\n    const { width, height } = getDimensions();\n\n    const zeroColor = colorScale[0] as Color;\n    const containerStyles = {\n      fontSize,\n      ...(useAnimation && {\n        [`--${NAMESPACE}-loading`]: zeroColor,\n        [`--${NAMESPACE}-loading-active`]:\n          colorScheme === 'light'\n            ? chroma(zeroColor).darken(0.3).hex()\n            : chroma(zeroColor).brighten(0.25).hex(),\n      }),\n    };\n\n    return (\n      <article\n        ref={ref}\n        className={`${NAMESPACE} ${styles.container}`}\n        style={{ ...styleProp, ...containerStyles }}\n      >\n        <div className={getClassName('scroll-container', styles.scrollContainer)}>\n          <svg\n            width={width}\n            height={height}\n            viewBox={`0 0 ${width} ${height}`}\n            className={getClassName('calendar', styles.calendar)}\n            style={{ marginLeft: weekdayLabelOffset }}\n          >\n            {!loading && renderWeekdayLabels()}\n            {!loading && renderMonthLabels()}\n            {renderCalendar()}\n          </svg>\n        </div>\n        {renderFooter()}\n      </article>\n    );\n  },\n);\n\nActivityCalendar.displayName = 'ActivityCalendar';\n\n// TODO: remove this in v3\nexport const Skeleton = (props: Omit<Props, 'data'>) => <ActivityCalendar data={[]} {...props} />;\n\n// TODO: make this a named export in v3\nexport default ActivityCalendar;\n","import { useEffect, useState } from 'react';\n\nimport Calendar, { type Props, Skeleton } from './component/ActivityCalendar';\n\nfunction ActivityCalendar(props: Props) {\n  // This component relies on various client hooks,\n  // so it cannot be rendered on the server.\n  const [isClient, setClient] = useState(false);\n\n  useEffect(() => {\n    setClient(true);\n  }, []);\n\n  return isClient ? <Calendar {...props} /> : null;\n}\n\nexport { Skeleton };\nexport default ActivityCalendar;\n"],"names":["NAMESPACE","LABEL_MARGIN","DEFAULT_MONTH_LABELS","DEFAULT_LABELS","months","weekdays","totalCount","legend","less","more","useColorScheme","colorScheme","setColorScheme","useState","onChange","event","matches","useEffect","mediaQuery","window","matchMedia","addEventListener","removeEventListener","query","usePrefersReducedMotion","prefersReducedMotion","setPrefersReducedMotion","validateActivities","activities","maxLevel","length","Error","date","level","count","isValid","parseISO","RangeError","groupByWeeks","weekStart","normalizedActivities","fillHoles","firstActivity","firstDate","firstCalendarDate","getDay","subWeeks","nextDay","paddedActivities","Array","differenceInCalendarDays","fill","undefined","numberOfWeeks","Math","ceil","range","map","weekIndex","slice","calendar","Map","a","lastActivity","eachDayOfInterval","start","end","day","formatISO","representation","has","get","getClassName","name","styles","generateEmptyData","year","Date","getFullYear","days","n","keys","getMonthLabels","weeks","monthNames","reduce","labels","week","find","activity","month","getMonth","monthName","toLocaleString","prevLabel","label","filter","index","minWeeks","maxWeekdayLabelWidth","showWeekdayLabel","fontSize","maxWidth","byDayIndex","max","calcTextDimensions","width","text","height","namespace","svg","document","createElementNS","style","position","visibility","fontFamily","getComputedStyle","body","textNode","textContent","appendChild","boundingBox","getBBox","removeChild","initWeekdayLabels","input","shouldShow","indexed","dayNameToIndex","toLowerCase","sun","mon","tue","wed","thu","fri","sat","createTheme","size","defaultTheme","createDefaultTheme","validateTheme","light","dark","isColorScale","createColorScale","colors","invalidColor","color","chroma","valid","String","scale","mode","ActivityCalendar","forwardRef","data","blockMargin","blockRadius","blockSize","eventHandlers","hideColorLegend","hideMonthLabels","hideTotalCount","labelsProp","loading","renderBlock","renderColorLegend","showWeekdayLabels","styleProp","theme","themeProp","totalCountProp","ref","systemColorScheme","colorScale","useAnimation","getYear","Object","assign","labelHeight","weekdayLabels","weekdayLabelOffset","getDimensions","getEventHandlers","handlers","key","renderCalendar","dayIndex","animation","loadingAnimation","animationDelay","block","_jsx","x","y","rx","ry","Fragment","children","transform","renderFooter","sum","_jsxs","className","footer","marginLeft","replace","legendColors","marginRight","renderWeekdayLabels","dominantBaseline","textAnchor","renderMonthLabels","zeroColor","containerStyles","darken","hex","brighten","container","scrollContainer","viewBox","displayName","Skeleton","props","isClient","setClient","Calendar"],"mappings":"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","x_google_ignoreList":[3]}